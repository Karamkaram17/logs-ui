import{a as A}from"./chunk-RTGUU6BT.js";import{a as T}from"./chunk-DCRXVAZ5.js";import{a as V,b as N}from"./chunk-NESBKKSV.js";import{g as v,j as L,k,m as S,o as P,p as O,u as D,x as E,y as I}from"./chunk-27ZVCEN3.js";import"./chunk-4OHSL7H7.js";import"./chunk-LYIE5VA6.js";import{ka as M}from"./chunk-4NE3MRBP.js";import"./chunk-AESYL7IM.js";import{Eb as r,Fb as a,Gb as p,Ia as x,J as b,Ob as f,_b as c,ac as F,bc as _,cb as g,fc as C,ga as u,gb as o,gc as m,hc as d,ic as h,ja as w,tb as l,ub as y}from"./chunk-NRUTE7DH.js";var K=()=>({background:"var(--login-background)","box-shadow":"var(--login-box-shadow)"}),W=e=>({extraClass:"rounded rounded-3 p-2",extraStyles:e}),G=()=>({transform:"scale(1.5)"}),U=e=>({icon:"person",extraStyles:e,extraClass:"text-primary"}),j=e=>({label:"Username",color:"primary",prefixIcon:e}),q=e=>({icon:"lock_filled",extraStyles:e,extraClass:"text-primary"}),R=()=>({icon:"home",extraClass:"text-primary"}),Y=(e,i)=>({label:"Password",type:"password",color:"primary",prefixIcon:e,suffixIcon:i}),z=()=>({height:"45px"}),J=(e,i)=>({label:"LOGIN",extraStyles:e,matAttribute:"mat-flat-button",type:"submit",color:"primary",disabled:i,extraClass:"rounded rounded-3",takeFullWidth:!0}),de=(()=>{let i=class i{constructor(){this._authService=u(N),this._snackbar=u(A),this.preventPasswordView=g(!1),this.disableSubmitSig=g(!1),this.constants=V,this.date=new Date().getFullYear(),this.LoginForm=new k({username:new S("",[v.required]),password:new S("",[v.required])})}ngOnInit(){window.scrollTo(0,0)}_handleKeyDown(n){n.ctrlKey&&n.altKey&&n.key==="x"&&(n.preventDefault(),this.preventPasswordView.set(!0))}login(){E(this.LoginForm)&&!this.disableSubmitSig()&&this.LoginForm.value.username&&this.LoginForm.value.password&&(this.disableSubmitSig.set(!0),this._authService.login(this.LoginForm.value.username.toLowerCase(),this.LoginForm.value.password).pipe(b(1)).subscribe({next:n=>{this._authService.successfulLogin(n)},error:()=>{this.disableSubmitSig.set(!1),this._snackbar.open("Wrong credentials","error")},complete:()=>{this.disableSubmitSig.set(!1)}}))}};i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=w({type:i,selectors:[["ks-solutions-login"]],hostBindings:function(s,t){s&1&&f("keydown",function(H){return t._handleKeyDown(H)},!1,x)},standalone:!0,features:[C],decls:20,vars:36,consts:[[1,"login-container","d-flex","align-items-center","justify-content-center"],[1,"login-card",3,"config"],[1,"py-3","mx-auto","text-center"],[1,"h2","capital"],[1,"h3"],[1,"px-sm-1","px-md-4","py-2",3,"formGroup","ngSubmit"],[1,"mb-3"],[3,"control","config","textMaxLength","noSpace"],[3,"control","config","textMaxLength","noSpace","hideShowPassword"],[1,"mt-4",3,"config"],[1,"mt-3","small","mx-auto","text-center"],[1,"small","mx-auto","text-center","mt-2"]],template:function(s,t){s&1&&(r(0,"div",0)(1,"kss-lib-card",1)(2,"div",2)(3,"div",3),c(4,"WELCOME"),a(),r(5,"div",4),c(6,"LOGIN TO YOUR ACCOUNT"),a()(),r(7,"div")(8,"form",5),f("ngSubmit",function(){return t.login()}),r(9,"div",6),p(10,"kss-lib-input",7),a(),r(11,"div",6),p(12,"kss-lib-input",8),a(),p(13,"kss-lib-button",9),a()(),r(14,"div",10),c(15),a(),r(16,"div",11),c(17," Powered By "),r(18,"b"),c(19),a()()()()),s&2&&(o(),l("config",d(18,W,m(17,K))),o(7),l("formGroup",t.LoginForm),o(2),l("control",t.LoginForm.controls.username)("config",d(23,j,d(21,U,m(20,G))))("textMaxLength",t.preventPasswordView()?50:20)("noSpace",!0),o(2),l("control",t.LoginForm.controls.password)("config",h(29,Y,d(26,q,m(25,G)),m(28,R)))("textMaxLength",t.preventPasswordView()?50:20)("noSpace",!0)("hideShowPassword",t.preventPasswordView()),o(),l("config",h(33,J,m(32,z),t.disableSubmitSig())),o(2),_("Copyright 2022 - ",t.date," - Version: ",t.constants.version,""),o(3),y("color","var(--login-created-by-color)"),o(),F(" ",t.constants.appOwner," "))},dependencies:[M,T,D,P,L,O,I],styles:[".login-container[_ngcontent-%COMP%]{background-color:var(--login-page-bg-color);overflow-y:auto;min-height:100dvh}.login-card[_ngcontent-%COMP%]{width:calc(100dvw - 20px);max-width:500px}"],changeDetection:0});let e=i;return e})();export{de as LoginComponent};
